# ADR 0004: Friend assemblies vs merge rule

## Status
Accepted


## Context
We have established the principle that assemblies should remain small, well-defined and self-contained. When two assemblies begin to share a large amount of internal logic or types, we must decide whether to merge them or allow friend access.

## Decision
- Default: Keep assemblies small, cohesive, and with minimal surface area.
- Merge: If two assemblies are conceptually one unit, merge them into a single assembly.
 - Friend assemblies: If there is a strong case for isolated assemblies but we want to preserve modularity, allow friend access using InternalsVisibleTo.

## Consequences - Benefits and trade-offs
- Small assemblies remain teachable and maintainable.
- Merging reduces cross-assembly duplication.
 - Friend assemblies preserve modularity while enabling collaboration.
- Risks: Friend assemblies can be abused and lead to increased coupling of internals.
- Every merge or friend decision must be documented in `docs/decisions/` for future contributors.
